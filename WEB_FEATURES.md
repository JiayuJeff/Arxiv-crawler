# ArXiv聊天系统网页版功能说明

## 🆕 新增功能概览

### 1. 网页版聊天界面
- **美观的现代化UI设计**
- **响应式布局，支持移动端**
- **实时状态显示和进度反馈**
- **优雅的消息展示和加载动画**

### 2. 智能加载策略
```
论文数量 ≤ max_load_files:
  ┌─────────────────────┐
  │   批量处理模式       │
  │ ✓ 一次加载所有论文   │
  │ ✓ 统一问答处理      │
  │ ✓ 不显示论文标识    │
  └─────────────────────┘

论文数量 > max_load_files:
  ┌─────────────────────┐
  │   逐篇处理模式       │
  │ ✓ 逐篇加载和问答     │
  │ ✓ 包含历史对话上下文 │
  │ ✓ 显示论文标题和编号 │
  └─────────────────────┘
```

### 3. 对话记录系统
每篇论文维护独立的对话历史：
```json
{
  "conversation": [
    {
      "question": "这篇论文的主要贡献是什么？",
      "response": "该论文提出了AutoTIR框架..."
    },
    {
      "question": "与其他方法相比有什么优势？", 
      "response": "相比传统方法，AutoTIR具有..."
    }
  ]
}
```

### 4. 论文跳过功能
- **常驻跳过输入框**
- **输入论文编号（逗号分隔）**
- **实时更新活跃论文数量**
- **可清空跳过列表**

## 🚀 使用方法

### 基本启动命令
```bash
python main.py \
  --chat_file tool-rl/output.json \
  --translate_llm "Qwen/Qwen3-32B" \
  --port 10006 \
  --web
```

### 完整参数示例
```bash
python main.py \
  --chat_file tool-rl/output.json \
  --translate_llm "Qwen/Qwen3-32B" \
  --port 10006 \
  --web \
  --max_load_files 5 \
  --web_port 8080
```

### 新增参数说明
| 参数 | 默认值 | 说明 |
|------|--------|------|
| `--web` | False | 启用网页版聊天界面 |
| `--max_load_files` | 10 | 最大同时加载论文数量 |
| `--web_port` | 8080 | 网页服务器端口 |

## 💡 使用建议

### 不同场景的参数配置

**详细分析模式** (逐篇处理)
```bash
--max_load_files 1
```
- 适合深入分析每篇论文
- 每次只关注一篇论文的内容
- 保持对话上下文的连贯性

**概览对比模式** (批量处理)
```bash
--max_load_files 20
```
- 适合论文间的对比分析
- 快速获得整体概览
- 发现论文间的联系和差异

### 交互技巧

1. **使用跳过功能**
   - 输入不感兴趣的论文编号
   - 提高问答的相关性和效率

2. **多轮对话**
   - 每篇论文支持连续深入讨论
   - 系统会记住之前的对话内容

3. **灵活切换**
   - 可以随时调整跳过的论文
   - 实时查看活跃论文状态

## 🎯 界面功能说明

### 主聊天区域
- **消息展示**: 用户问题和AI回答
- **论文标识**: 逐篇模式下显示论文信息
- **错误提示**: 请求失败时的友好提示
- **加载动画**: 处理中的视觉反馈

### 侧边栏功能
- **论文管理**: 跳过功能和状态显示
- **论文列表**: 所有论文的概览
- **实时状态**: 活跃论文数量统计

## 🔧 技术细节

### 文件自动保存
- 每轮对话后立即保存
- 对话记录持久化存储
- 支持中断后恢复

### 错误处理
- 网络请求失败自动跳过
- 显示具体错误信息
- 不影响其他论文的处理

### 性能优化
- 智能加载策略减少内存使用
- 并发处理提高响应速度
- 优雅的用户体验设计

## 📋 数据结构变化

原有字段保持不变，新增：
```json
{
  "_paper_id": 1,           // 论文唯一标识符
  "conversation": [         // 对话历史记录
    {
      "question": "...",    // 用户问题
      "response": "..."     // AI回答
    }
  ]
}
```

---

🎉 **现在您可以享受全新的网页版ArXiv聊天体验了！**
